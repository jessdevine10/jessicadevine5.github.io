<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Jessica's Final Project</title>
  <meta name="description" content="HTML5 Template">
  <link rel="stylesheet" type="text/css" href="stylepage.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<center><h1>The Great Race</h1>

</head>
<center><body>
	<center><h3>Click Green Light to Begin</h3> 
		<div="red"></div>
		
     <div2 onclick="switchLight(0);" class="light stop on" id="pause"></div2> 
   <div2 onclick="switchLight(1);" class="light slow"></div2>
    <div2 onclick="switchLight(2);" class="light go" id="go"></div2>   
</body>

<script type="text/javascript">
/* This line gets all the HTML elements with class="light" and assigns them to a variable called LIGHTS.*/
var LIGHT = document.getElementsByClassName("light");
/* This defines a function which turns off every light by removing the "on" class from the HTML elements.*/
function allOff() { 
  for (var i=0; i<LIGHT.length; i = i + 1) { 
    LIGHT[i].classList.remove("on"); 
  } 
} 
 </script>
<script>
/* This defines a function which first turns off every light and then immediately turns one on.*/
function switchLight(lightNumber) { 
  allOff(); 
  var light = LIGHT[lightNumber]; 
  light.classList.add("on"); 
}
/* jquery animate */
        $(document).ready(function() { 
            $("#go").click(function() { 
                var r = $('.red'), 
                    d = $('.doubleRed), 
                    wW = $(window).width(), 
                    rSpeed = Math.floor(Math.random() * wW + wW), 
                    dpeed = Math.floor(Math.random() * wW + wW); 
                switchLight(2); 
                function winTest() { 
                    if (rSpeed > dSpeed) { 
                        alert("Top car has won :)!"); 
                        reset(); 
                    } else { 
                        alert("Bottom car has won :)!"); 
                        reset(); 
                    } 
                    switchLight(0); 
                } 
                function race() { 
                    var rAnim = r.animate({ 
                        left: rSpeed 
                    }, { 
                        duration: 600, 
                        done: function() { 
                            dAnim.stop(500); 
                            winTest(); 
                        } 
                    }); 
                    var dAnim = d.animate({ 
                        left: dSpeed 
                    }, { 
                        duration: 600, 
                        done: function() { 
                            rAnim.stop(500); 
                            winTest(); 
                        } 
                    }); 
                } 
                race(); 
                function reset() { 
                    rSpeed = 0; 
                    dSpeed = 0; 
                    r.css('left', 20); 
                    d.css('left', 20); 
                } 
            }); 
        }); 
    </script> 
</body> 
